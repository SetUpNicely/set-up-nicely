// üìÅ shared/data/presetScans.ts
// Purpose: Define logic, timeframe, and goal for each preset scan

import { Timeframe } from './Timeframe.js';
import { ScanDirection } from './ScanTypes';

export interface PresetScanDefinition {
  id: string;
  name: string;
  description: string;
  timeframe: Timeframe;
  direction: ScanDirection;
  logic: Record<string, any>;
  tier: 'free' | 'paid' | 'pro';

  // ‚úÖ Optional display fields added for UI logic
  pvsScore?: number;
  confidenceScore?: number;
  sectorStrength?: number;
  sectorHotToday?: boolean;
}

export const presetScans: PresetScanDefinition[] = [
  {
    id: 'emaCrossVolume1m_bull',
    name: '9/20 EMA Bullish Cross + Volume Spike',
    description: '9 EMA crosses above 20 EMA with volume spike.',
    timeframe: '1m',
    direction: 'bullish',
    logic: { emaFast: 9, emaSlow: 20, direction: 'bullish', volumeSpikeMultiplier: 1.5 },
    tier: 'free',
  },
  {
    id: 'emaCrossVolume1m_bear',
    name: '9/20 EMA Bearish Cross + Volume Spike',
    description: '9 EMA crosses below 20 EMA with volume spike.',
    timeframe: '1m',
    direction: 'bearish',
    logic: { emaFast: 9, emaSlow: 20, direction: 'bearish', volumeSpikeMultiplier: 1.5 },
    tier: 'free',
  },
  {
    id: 'premarketBreakout_bull',
    name: 'Break of Premarket High + Volume',
    description: 'Breaks above premarket high with volume confirmation.',
    timeframe: '1m',
    direction: 'bullish',
    logic: { breakAbove: 'premarketHigh', volumeMultiplier: 1.2 },
    tier: 'free',
  },
  {
    id: 'premarketBreakout_bear',
    name: 'Break of Premarket Low + Volume',
    description: 'Breaks below premarket low with volume confirmation.',
    timeframe: '1m',
    direction: 'bearish',
    logic: { breakBelow: 'premarketLow', volumeMultiplier: 1.2 },
    tier: 'free',
  },
  {
    id: 'vwapBounce',
    name: 'VWAP Bounce (Bullish)',
    description: 'Price bounces off VWAP and continues upward.',
    timeframe: '1m',
    direction: 'bullish',
    logic: { vwapInteraction: 'bounce', direction: 'bullish' },
    tier: 'free',
  },
  {
    id: 'vwapRejection',
    name: 'VWAP Rejection (Bearish)',
    description: 'Price rejects off VWAP and trends lower.',
    timeframe: '1m',
    direction: 'bearish',
    logic: { vwapInteraction: 'reject', direction: 'bearish' },
    tier: 'free',
  },
  {
    id: 'orbBreakout_bull',
    name: 'Opening Range Breakout (Bullish)',
    description: 'Break of opening range high with volume support.',
    timeframe: '5m',
    direction: 'bullish',
    logic: { breakoutLevel: 'high', orbWindowMinutes: 15, volumeSpike: true },
    tier: 'free',
  },
  {
    id: 'orbBreakout_bear',
    name: 'Opening Range Breakdown (Bearish)',
    description: 'Break of opening range low with volume support.',
    timeframe: '5m',
    direction: 'bearish',
    logic: { breakoutLevel: 'low', orbWindowMinutes: 15, volumeSpike: true },
    tier: 'free',
  },
  {
    id: 'syncDaily4H_bull',
    name: 'Daily/4H Bullish Timeframe Sync',
    description: 'Daily and 4H both show bullish structure.',
    timeframe: 'D',
    direction: 'bullish',
    logic: { syncTimeframes: ['4h', 'D'], trendMatch: 'bullish' },
    tier: 'free',
  },
  {
    id: 'syncDaily4H_bear',
    name: 'Daily/4H Bearish Timeframe Sync',
    description: 'Daily and 4H both show bearish structure.',
    timeframe: 'D',
    direction: 'bearish',
    logic: { syncTimeframes: ['4h', 'D'], trendMatch: 'bearish' },
    tier: 'free',
  },
  {
    id: 'relativeStrengthBull',
    name: 'Relative Strength vs SPY (Bullish)',
    description: 'Stock outperforming SPY with bullish trend.',
    timeframe: 'W',
    direction: 'bullish',
    logic: { compareTo: 'SPY', relativeOutperformance: true, trendDirection: 'bullish' },
    tier: 'free',
  },
  {
    id: 'relativeStrengthBear',
    name: 'Relative Weakness vs SPY (Bearish)',
    description: 'Stock underperforming SPY with bearish trend.',
    timeframe: 'W',
    direction: 'bearish',
    logic: { compareTo: 'SPY', relativeOutperformance: false, trendDirection: 'bearish' },
    tier: 'free',
  },
  {
    id: 'weeklyTrendlineBreak_bull',
    name: 'Weekly Trendline Breakout (Bullish)',
    description: 'Price closes above key weekly trendline.',
    timeframe: 'W',
    direction: 'bullish',
    logic: { trendlineBreakConfirmed: true, direction: 'bullish' },
    tier: 'free',
  },
  {
    id: 'weeklyTrendlineBreak_bear',
    name: 'Weekly Trendline Breakdown (Bearish)',
    description: 'Price closes below key weekly trendline.',
    timeframe: 'W',
    direction: 'bearish',
    logic: { trendlineBreakConfirmed: true, direction: 'bearish' },
    tier: 'free',
  },
  {
    id: 'pullbackBreakout_bull',
    name: '3+ Day Pullback Breakout',
    description: 'Bullish breakout after 3+ day pullback.',
    timeframe: 'D',
    direction: 'bullish',
    logic: { pullbackLength: 3, breakoutAfterPullback: true },
    tier: 'free',
  },
  // Paid Tier
  {
    id: 'flagPattern_bull',
    name: 'Bull Flag Breakout',
    description: 'Bullish breakout from flag consolidation.',
    timeframe: '5m',
    direction: 'bullish',
    logic: { patternType: 'flag', direction: 'bullish', breakoutConfirmed: true },
    tier: 'paid',
  },
  {
    id: 'flagPattern_bear',
    name: 'Bear Flag Breakdown',
    description: 'Bearish breakdown from flag consolidation.',
    timeframe: '5m',
    direction: 'bearish',
    logic: { patternType: 'flag', direction: 'bearish', breakoutConfirmed: true },
    tier: 'paid',
  },
  {
    id: 'highVolumeBreakout_bull',
    name: 'High Volume Breakout (Bullish)',
    description: 'Bullish breakout with 2x+ relative volume.',
    timeframe: '5m',
    direction: 'bullish',
    logic: { relativeVolumeMultiplier: 2, breakoutDirection: 'bullish' },
    tier: 'paid',
  },
  {
    id: 'highVolumeBreakout_bear',
    name: 'High Volume Breakdown (Bearish)',
    description: 'Bearish breakdown with 2x+ relative volume.',
    timeframe: '5m',
    direction: 'bearish',
    logic: { relativeVolumeMultiplier: 2, breakoutDirection: 'bearish' },
    tier: 'paid',
  },
  {
    id: 'emaBounce_bull',
    name: '10/20 EMA Bullish Bounce',
    description: 'Price pulls back to rising 10/20 EMAs and bounces.',
    timeframe: '15m',
    direction: 'bullish',
    logic: { emaBounce: [10, 20], direction: 'bullish' },
    tier: 'paid',
  },
  {
    id: 'emaBounce_bear',
    name: '10/20 EMA Bearish Rejection',
    description: 'Price bounces into falling 10/20 EMAs and rejects.',
    timeframe: '15m',
    direction: 'bearish',
    logic: { emaBounce: [10, 20], direction: 'bearish' },
    tier: 'paid',
  },
  {
    id: 'adxStructure_bull',
    name: 'ADX + HH/HL (Bullish)',
    description: 'Bullish trend structure with ADX > 25.',
    timeframe: '1h',
    direction: 'bullish',
    logic: { adxThreshold: 25, priceStructure: 'HH/HL' },
    tier: 'paid',
  },
  {
    id: 'adxStructure_bear',
    name: 'ADX + LL/LH (Bearish)',
    description: 'Bearish trend structure with ADX > 25.',
    timeframe: '1h',
    direction: 'bearish',
    logic: { adxThreshold: 25, priceStructure: 'LL/LH' },
    tier: 'paid',
  },
  {
    id: 'rsiStructure_bull',
    name: 'RSI > 50 + Higher Lows',
    description: 'Bullish momentum confirmed by RSI staying > 50 and price structure.',
    timeframe: '1h',
    direction: 'bullish',
    logic: { rsiHoldAbove: 50, priceStructure: 'higherLows' },
    tier: 'paid',
  },
  {
    id: 'rsiStructure_bear',
    name: 'RSI < 50 + Lower Highs',
    description: 'Bearish momentum confirmed by RSI staying < 50 and price structure.',
    timeframe: '1h',
    direction: 'bearish',
    logic: { rsiHoldBelow: 50, priceStructure: 'lowerHighs' },
    tier: 'paid',
  },
  {
    id: 'cupHandle',
    name: 'Cup & Handle Breakout',
    description: 'Classic bullish cup and handle continuation breakout.',
    timeframe: 'D',
    direction: 'bullish',
    logic: { pattern: 'cupHandle', breakout: true },
    tier: 'paid',
  },
  {
    id: 'roundedTop',
    name: 'Rounded Top Breakdown',
    description: 'Rounded top pattern followed by bearish breakdown.',
    timeframe: 'D',
    direction: 'bearish',
    logic: { pattern: 'roundedTop', breakdown: true },
    tier: 'paid',
  },
  {
    id: 'liquiditySweep_bull',
    name: 'Liquidity Sweep + VWAP Recovery (Bullish)',
    description: 'Price sweeps recent low then reclaims VWAP with strength.',
    timeframe: '1m',
    direction: 'bullish',
    logic: { liquiditySweep: 'low', vwapReclaim: true },
    tier: 'pro',
  },
  {
    id: 'liquiditySweep_bear',
    name: 'Liquidity Sweep + VWAP Rejection (Bearish)',
    description: 'Price sweeps recent high then fails VWAP and drops.',
    timeframe: '1m',
    direction: 'bearish',
    logic: { liquiditySweep: 'high', vwapReject: true },
    tier: 'pro',
  },
  {
    id: 'gapFillReversal_bull',
    name: 'Premarket Gap Fill Reversal (Bullish)',
    description: 'Gap down fills and price reverses up.',
    timeframe: '1m',
    direction: 'bullish',
    logic: { gapDirection: 'down', fillAndReverse: true },
    tier: 'pro',
  },
  {
    id: 'gapFillReversal_bear',
    name: 'Premarket Gap Fill Reversal (Bearish)',
    description: 'Gap up fills and price reverses down.',
    timeframe: '1m',
    direction: 'bearish',
    logic: { gapDirection: 'up', fillAndReverse: true },
    tier: 'pro',
  },
  {
    id: 'orbRetest_bull',
    name: 'ORB Retest Bounce (Bullish)',
    description: 'Price retests breakout zone after ORB high and holds.',
    timeframe: '15m',
    direction: 'bullish',
    logic: { orbRetestLevel: 'high', retestHold: true },
    tier: 'pro',
  },
  {
    id: 'orbRetest_bear',
    name: 'ORB Retest Rejection (Bearish)',
    description: 'Price retests breakdown zone after ORB low and fails.',
    timeframe: '15m',
    direction: 'bearish',
    logic: { orbRetestLevel: 'low', retestReject: true },
    tier: 'pro',
  },
  {
    id: 'vcpPattern',
    name: 'Volatility Contraction Pattern (VCP)',
    description: 'Tightening range with lower volume, breakout triggers.',
    timeframe: '15m',
    direction: 'bullish',
    logic: { vcpConfirmed: true },
    tier: 'pro',
  },
  {
    id: 'keltnerSqueeze_bull',
    name: 'Trend Align + Keltner Squeeze (Bullish)',
    description: 'Price in squeeze with bullish trend breakout.',
    timeframe: '1h',
    direction: 'bullish',
    logic: { keltnerSqueeze: true, trend: 'bullish' },
    tier: 'pro',
  },
  {
    id: 'keltnerSqueeze_bear',
    name: 'Trend Align + Keltner Squeeze (Bearish)',
    description: 'Price in squeeze with bearish trend breakdown.',
    timeframe: '1h',
    direction: 'bearish',
    logic: { keltnerSqueeze: true, trend: 'bearish' },
    tier: 'pro',
  },
  {
    id: 'rsiMacdCombo_bull',
    name: 'RSI Divergence + MACD Cross (Bullish)',
    description: 'Momentum divergence and MACD cross upward.',
    timeframe: 'D',
    direction: 'bullish',
    logic: { rsiDivergence: 'bullish', macdCross: 'bullish' },
    tier: 'pro',
  },
  {
    id: 'volumeSpikeMultiTF_bull',
    name: 'Multi-TF Volume Spike (Bullish)',
    description: 'Volume spike on 4H and Daily at key breakout.',
    timeframe: '4h',
    direction: 'bullish',
    logic: { volumeSpike: true, confirmOnTimeframes: ['4h', 'D'] },
    tier: 'pro',
  },
  {
    id: 'volumeSpikeMultiTF_bear',
    name: 'Multi-TF Volume Spike (Bearish)',
    description: 'Volume spike on 4H and Daily at key breakdown.',
    timeframe: '4h',
    direction: 'bearish',
    logic: { volumeSpike: true, confirmOnTimeframes: ['4h', 'D'], direction: 'bearish' },
    tier: 'pro',
  },
  {
    id: 'goldenCross',
    name: 'Golden Cross',
    description: '50 EMA crosses above 200 EMA.',
    timeframe: 'D',
    direction: 'bullish',
    logic: { emaFast: 50, emaSlow: 200, direction: 'bullish' },
    tier: 'pro',
  },
  {
    id: 'deathCross',
    name: 'Death Cross',
    description: '50 EMA crosses below 200 EMA.',
    timeframe: 'D',
    direction: 'bearish',
    logic: { emaFast: 50, emaSlow: 200, direction: 'bearish' },
    tier: 'pro',
  },
  {
    id: 'weeklyCloseKeyLevel_bull',
    name: 'Weekly Close Above Key Level',
    description: 'Weekly candle closes above resistance.',
    timeframe: 'W',
    direction: 'bullish',
    logic: { keyLevelBreak: 'above', candleClose: 'weekly' },
    tier: 'pro',
  },
  {
    id: 'weeklyCloseKeyLevel_bear',
    name: 'Weekly Close Below Key Level',
    description: 'Weekly candle closes below support.',
    timeframe: 'W',
    direction: 'bearish',
    logic: { keyLevelBreak: 'below', candleClose: 'weekly' },
    tier: 'pro',
  },
  {
    id: 'tripleCombo_bull',
    name: 'Volume + RS + ADX Combo (Bullish)',
    description: 'Volume surge, relative strength, and strong ADX.',
    timeframe: '4h',
    direction: 'bullish',
    logic: { relativeVolume: true, outperformSPY: true, adxConfirm: true },
    tier: 'pro',
  },
  {
    id: 'tripleCombo_bear',
    name: 'Volume + RS + ADX Combo (Bearish)',
    description: 'Volume drop, relative weakness, and strong ADX.',
    timeframe: '4h',
    direction: 'bearish',
    logic: { relativeVolume: true, outperformSPY: false, adxConfirm: true },
    tier: 'pro',
  },
];


